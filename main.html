<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<title>Chat Room</title>
	</head>
	
	<body>
		
		<img src="ProfGate.jpg" alt="GWU" />
		<hr>
		
		
		<h1>Welcome to the Chatting Application</h1>
		<br/><br/>
		
		<p>**If you don't have an account, click Sign up.</p>
		 
		
			<p>
			Email: <input type="text" name="email" id="email"/> <br/>
			Password: <input type="password" name="password" id="password"/> <br/>
			
			<input type="button" name="LogIn" id="LogIn" value="Log In" />
			<input type="button" name="SignUp" id="SignUp" value="Sign up" /><br/><br/>
			</p>

		<hr>
		<p>
			If you have any questions about our program, please contact the system administrator at
			<a href="mailto:your address">gracedu@gwmail.gwu.edu</a>
		</p>
		
		<script>
			$("#SignUp").click(function(){
				window.location.href = "register.html";
			});
			
			$("#LogIn").click(function(){
				var data = {email: $("#email").val(), password: $("#password").val(), returnSecureToken: true};
				$.ajax({
					url: 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAq2elpPzQXq1djYDmjdPw6-H3KvOH7-Hg',
					type: 'POST',
					contentType: 'application/json',
					data: JSON.stringify(data),
					async: false,
					success: function(response) {
						window.localStorage.setItem('chat-user-email', $("#email").val()); //set current user
						window.location.href = "chat.html";
					},
					error: function(xhr, ajaxOptions, thrownError){
						alert("Fail to log in!");
						console.log(data);
						console.log(xhr.responseText);
					}
					});
				
				});
		</script>	
		

		
		
		
		
	</body>
</html>